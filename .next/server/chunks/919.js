"use strict";exports.id=919,exports.ids=[919],exports.modules={49919:(a,b,c)=>{c.d(b,{A:()=>p});var d=c(21124),e=c(38301);let f=e.forwardRef(function({title:a,titleId:b,...c},d){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?e.createElement("title",{id:b},a):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.348 14.652a3.75 3.75 0 0 1 0-5.304m5.304 0a3.75 3.75 0 0 1 0 5.304m-7.425 2.121a6.75 6.75 0 0 1 0-9.546m9.546 0a6.75 6.75 0 0 1 0 9.546M5.106 18.894c-3.808-3.807-3.808-9.98 0-13.788m13.788 0c3.808 3.807 3.808 9.98 0 13.788M12 12h.008v.008H12V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))});var g=c(95964);let h=e.forwardRef(function({title:a,titleId:b,...c},d){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?e.createElement("title",{id:b},a):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"}))}),i=e.forwardRef(function({title:a,titleId:b,...c},d){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?e.createElement("title",{id:b},a):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))});var j=c(16817),k=c(92073);let l=e.forwardRef(function({title:a,titleId:b,...c},d){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?e.createElement("title",{id:b},a):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}),m=e.forwardRef(function({title:a,titleId:b,...c},d){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?e.createElement("title",{id:b},a):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.76c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.076-4.076a1.526 1.526 0 0 1 1.037-.443 48.282 48.282 0 0 0 5.68-.494c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"}))}),n=e.forwardRef(function({title:a,titleId:b,...c},d){return e.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":b},c),a?e.createElement("title",{id:b},a):null,e.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"}))});async function o(){throw Error("Zoom SDK can only be loaded on the client side")}function p({webinarId:a,webinarTitle:b,userName:c,userEmail:p,onClose:q,onError:r}){let[s,t]=(0,e.useState)({isConnecting:!0,isConnected:!1,isFullscreen:!1,audioMuted:!0,videoMuted:!0,participantCount:0,connectionQuality:"unknown",hasError:!1,errorMessage:""}),u=(0,e.useRef)(null),v=(0,e.useRef)(null),w=(0,e.useRef)(null),x=(0,e.useRef)(!1),y=(0,e.useCallback)(a=>{if(console.log("[DEBUG] Parsing webinar ID:",a),/^\d+$/.test(a))return console.log("[DEBUG] Direct meeting number detected:",a),{meetingNumber:a,password:""};try{let b=new URL(a);console.log("[DEBUG] Parsing URL:",b.href);let c=b.pathname.split("/").filter(Boolean);console.log("[DEBUG] URL path parts:",c);let d="",e=c.findIndex(a=>"w"===a||"j"===a);if(-1!==e&&c[e+1]&&(d=c[e+1].replace(/\D/g,"")),!d){let a=c[c.length-1];a&&(d=a.replace(/\D/g,""))}if(!d){let b=a.match(/\d+/g);b&&b.length>0&&(d=b.reduce((a,b)=>a.length>b.length?a:b))}let f=b.searchParams.get("pwd")||b.searchParams.get("password")||"";if(f)try{let a=decodeURIComponent(f);console.log("[DEBUG] Password decoding:",{original:f,decoded:a,needsDecoding:f!==a}),f=a}catch(a){console.log("[DEBUG] Password decode failed, using original:",f)}return console.log("[DEBUG] Extracted meeting number:",d,"password:",f?"[REDACTED]":"none"),{meetingNumber:d||a,password:f}}catch(b){return console.log("[DEBUG] URL parsing failed, treating as direct meeting number:",a),{meetingNumber:a,password:""}}},[]),z=(0,e.useCallback)(async(a,b=0)=>{try{console.log("[DEBUG] Fetching signature for meeting:",a,"with role:",b);let c=await fetch("/api/zoom/webinar-signature",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({meetingNumber:a,role:b})});if(console.log("[DEBUG] Signature fetch response status:",c.status),!c.ok){let a=await c.text();throw console.error("[DEBUG] Signature fetch failed. Body:",a),Error(`Authentication failed: ${c.status}`)}let d=await c.json();if(console.log("[DEBUG] Signature response JSON:",d),!d.signature||!d.sdkKey)throw Error("Invalid authentication response");return d}catch(a){throw console.error("Signature generation failed:",a),Error("Unable to authenticate for webinar access. Please try again.")}},[]),A=(0,e.useCallback)(async()=>{if(!x.current){x.current=!0;try{t(a=>({...a,isConnecting:!0,hasError:!1}));let{meetingNumber:b,password:d}=y(a);if(console.log("Joining webinar:",{meetingNumber:b,password:d?"[REDACTED]":"none"}),!b)throw Error("Meeting number is required to join the webinar");if(!p)throw Error("Email address is required to join webinars");if(!c)throw Error("User name is required to join the webinar");console.log("[DEBUG] Loading Zoom Embedded SDK...");let e=await o();console.log("[DEBUG] Zoom Embedded loaded:",!!e);let f=await z(b);console.log("[DEBUG] Creating Zoom client...");let g=e.createClient();u.current=g,console.log("[DEBUG] Zoom client created"),console.log("[DEBUG] Initializing Zoom client...");let h=v.current;if(!h)throw Error("Zoom container not ready");console.log("[DEBUG] Zoom container ready:",h),await g.init({language:"en-US",zoomAppRoot:h,patchJsMedia:!0,customize:{video:{isResizable:!0,popper:{disableDraggable:!1}},meetingInfo:["topic","host","mn","participant","dc","enctype"],toolbar:{buttons:[]}}}),console.log("[DEBUG] Zoom client initialized");try{g.on("connection-change",a=>{console.log("Connection status:",a),a&&a.state&&("Connected"===a.state?t(a=>({...a,connectionQuality:"excellent",isConnected:!0,isConnecting:!1,hasError:!1})):"Fail"===a.state&&a.reason&&!a.reason.includes("Meeting Passcode wrong")&&t(a=>({...a,connectionQuality:"poor"})))}),console.log("[DEBUG] Event listeners set up")}catch(a){console.warn("Could not set up event listeners:",a)}console.log("[DEBUG] Attempting to join meeting:",b);let i={signature:f.signature,sdkKey:f.sdkKey,meetingNumber:b,userName:c,userEmail:p,password:d};console.log("[DEBUG] Join parameters:",{...i,signature:"[REDACTED]",password:d?"[REDACTED]":"none",passwordLength:d?d.length:0,passwordPreview:d?d.substring(0,3)+"...":"none"});try{await g.join(i)}catch(a){if(console.log("[DEBUG] Initial join failed:",a),3004===a.errorCode&&d){console.log("[DEBUG] Password error, trying with passWord parameter...");let a={...i,passWord:d};delete a.password;try{await g.join(a)}catch(a){if(3004===a.errorCode){console.log("[DEBUG] Both password formats failed, trying without password...");let a={signature:f.signature,sdkKey:f.sdkKey,meetingNumber:b,userName:c,userEmail:p};await g.join(a)}else throw a}}else if(3008===a.errorCode){console.log("[DEBUG] Meeting not started error. Trying with webinar-specific parameters...");let a=await z(b,1),e={signature:a.signature,sdkKey:a.sdkKey,meetingNumber:b,userName:c,userEmail:p,password:d,role:1};console.log("[DEBUG] Trying webinar join as panelist with role 1 signature..."),await g.join(e)}else throw a}console.log("[DEBUG] Successfully joined webinar"),t(a=>({...a,isConnecting:!1,isConnected:!0}))}catch(b){console.error("Webinar initialization failed:",b);let a="Failed to join webinar. Please try again.";if(b.errorCode)switch(b.errorCode){case 3706:a="The webinar meeting number is invalid or the webinar is not currently active. Please check the meeting number and try again.";break;case 3707:a="The webinar password is incorrect. Please check the password and try again.";break;case 3708:a="The webinar has not started yet or has already ended.";break;case 3709:a="You are not authorized to join this webinar.";break;default:a=`Webinar join failed: ${b.reason||b.message||"Unknown error"}`}else b.reason?a=`Connection failed: ${b.reason}`:b.message&&(a=b.message);t(b=>({...b,isConnecting:!1,hasError:!0,errorMessage:a})),r(a)}}},[a,c,p,y,z,r]),B=(0,e.useCallback)(async()=>{try{u.current&&("function"==typeof u.current.leave&&await u.current.leave(),"function"==typeof u.current.destroy&&await u.current.destroy())}catch(a){console.warn("Error leaving webinar:",a)}finally{u.current=null,x.current=!1,q()}},[q]),C=(0,e.useCallback)(()=>{w.current&&(document.fullscreenElement?document.exitFullscreen().then(()=>{t(a=>({...a,isFullscreen:!1}))}).catch(console.error):w.current.requestFullscreen().then(()=>{t(a=>({...a,isFullscreen:!0}))}).catch(console.error))},[]);return(0,d.jsxs)("div",{ref:w,className:`fixed inset-0 bg-black z-50 flex flex-col ${s.isFullscreen?"p-0":"p-1 sm:p-2"}`,children:[(0,d.jsxs)("div",{className:`flex items-center justify-between bg-gray-900/90 text-white p-3 rounded-t-lg ${s.isFullscreen?"absolute top-0 left-0 right-0 z-10":""}`,children:[(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsx)("h3",{className:"font-semibold text-sm sm:text-base truncate max-w-xs sm:max-w-md",children:b}),(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-xs sm:text-sm text-gray-300",children:[(()=>{switch(s.connectionQuality){case"excellent":return(0,d.jsx)(f,{className:"h-4 w-4 text-green-500"});case"good":return(0,d.jsx)(f,{className:"h-4 w-4 text-yellow-500"});case"poor":return(0,d.jsx)(f,{className:"h-4 w-4 text-red-500"});default:return(0,d.jsx)(f,{className:"h-4 w-4 text-gray-400"})}})(),(0,d.jsx)("span",{className:"hidden sm:inline",children:"unknown"===s.connectionQuality?"Connecting...":s.connectionQuality})]}),s.participantCount>0&&(0,d.jsxs)("div",{className:"flex items-center space-x-1 text-xs text-gray-300",children:[(0,d.jsx)(g.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{children:s.participantCount})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("button",{onClick:C,className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:s.isFullscreen?"Exit fullscreen":"Enter fullscreen",children:s.isFullscreen?(0,d.jsx)(h,{className:"h-5 w-5"}):(0,d.jsx)(i,{className:"h-5 w-5"})}),(0,d.jsx)("button",{onClick:B,className:"p-2 hover:bg-red-600 rounded-lg transition-colors",title:"Leave webinar",children:(0,d.jsx)(j.A,{className:"h-5 w-5"})})]})]}),(0,d.jsxs)("div",{className:`flex-1 bg-gray-100 relative ${s.isFullscreen?"mt-16":"rounded-lg mt-2"} overflow-hidden`,children:[s.isConnecting&&(0,d.jsx)("div",{className:"absolute inset-0 bg-gray-900/95 flex items-center justify-center z-20",children:(0,d.jsxs)("div",{className:"text-center text-white",children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-500 mx-auto mb-6"}),(0,d.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Connecting to webinar..."}),(0,d.jsx)("p",{className:"text-gray-300",children:"Please wait while we set up your session"})]})}),s.hasError&&(0,d.jsx)("div",{className:"absolute inset-0 bg-gray-900/95 flex items-center justify-center z-20",children:(0,d.jsxs)("div",{className:"text-center text-white max-w-md mx-auto p-6",children:[(0,d.jsx)(k.A,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),(0,d.jsx)("h3",{className:"text-xl font-semibold mb-2",children:"Connection Failed"}),(0,d.jsx)("p",{className:"text-gray-300 mb-6",children:s.errorMessage}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,d.jsx)("button",{onClick:()=>{t(a=>({...a,hasError:!1})),x.current=!1,A()},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold transition-colors",children:"Try Again"}),(0,d.jsx)("button",{onClick:B,className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg font-semibold transition-colors",children:"Close"})]})]})}),(0,d.jsx)("div",{ref:v,className:"w-full h-full",style:{minHeight:s.isFullscreen?"100vh":"70vh",height:s.isFullscreen?"100vh":"70vh"}})]}),!s.isFullscreen&&s.isConnected&&(0,d.jsxs)("div",{className:"bg-gray-900/90 text-white p-3 rounded-b-lg flex items-center justify-between",children:[(0,d.jsx)("div",{className:"flex items-center space-x-4",children:(0,d.jsx)("span",{className:"text-sm text-gray-300",children:"Webinar Controls"})}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Settings",children:(0,d.jsx)(l,{className:"h-5 w-5"})}),(0,d.jsx)("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Chat",children:(0,d.jsx)(m,{className:"h-5 w-5"})}),(0,d.jsx)("button",{className:"p-2 hover:bg-gray-700 rounded-lg transition-colors",title:"Raise hand",children:(0,d.jsx)(n,{className:"h-5 w-5"})})]})]})]})}},95964:(a,b,c)=>{c.d(b,{A:()=>e});var d=c(38301);let e=d.forwardRef(function({title:a,titleId:b,...c},e){return d.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":b},c),a?d.createElement("title",{id:b},a):null,d.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))})}};