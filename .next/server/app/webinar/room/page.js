(()=>{var e={};e.id=848,e.ids=[848],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},74175:e=>{"use strict";e.exports=require("tty")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},46772:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(31513),r(6009),r(91884),r(59198);var o=r(30170),s=r(45002),n=r(83876),i=r.n(n),a=r(66299),l={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let c=["",{children:["webinar",{children:["room",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,31513)),"C:\\Users\\nande\\OneDrive\\Desktop\\projects\\the-school-of-options\\client\\school-of-options\\src\\app\\webinar\\room\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,6009)),"C:\\Users\\nande\\OneDrive\\Desktop\\projects\\the-school-of-options\\client\\school-of-options\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,91884)),"C:\\Users\\nande\\OneDrive\\Desktop\\projects\\the-school-of-options\\client\\school-of-options\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,59198)),"C:\\Users\\nande\\OneDrive\\Desktop\\projects\\the-school-of-options\\client\\school-of-options\\src\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\nande\\OneDrive\\Desktop\\projects\\the-school-of-options\\client\\school-of-options\\src\\app\\webinar\\room\\page.tsx"],u="/webinar/room/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new o.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/webinar/room/page",pathname:"/webinar/room",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},54962:(e,t,r)=>{Promise.resolve().then(r.bind(r,67819))},67819:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var o=r(97247),s=r(28964),n=r(34178),i=r(1647),a=r(222),l=r(19133);let c=s.forwardRef(function({title:e,titleId:t,...r},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))});function d(){(0,n.useSearchParams)();let e=(0,n.useRouter)(),{user:t,isAuthenticated:r}=(0,a.a)(),[d,u]=(0,s.useState)(null),[m,p]=(0,s.useState)(null),g=()=>{e.push("/webinar")};return d?o.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:(0,o.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-6 text-center",children:[o.jsx(l.Z,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Unable to Join Webinar"}),o.jsx("p",{className:"text-gray-600 mb-6",children:d}),(0,o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[o.jsx("button",{onClick:()=>u(null),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Try Again"}),(0,o.jsxs)("button",{onClick:g,className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors flex items-center justify-center",children:[o.jsx(c,{className:"h-4 w-4 mr-2"}),"Back to Webinars"]})]})]})}):m?o.jsx(i.Z,{webinarId:m.id,webinarTitle:m.title,userName:t?.fullName||"Guest",userEmail:t?.email||"guest@example.com",onClose:g,onError:e=>{u(e)}}):o.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center text-white",children:[o.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-500 mx-auto mb-4"}),o.jsx("p",{className:"text-lg",children:"Loading webinar..."})]})})}function u(){return o.jsx(s.Suspense,{fallback:o.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,o.jsxs)("div",{className:"text-center text-white",children:[o.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-500 mx-auto mb-4"}),o.jsx("p",{className:"text-lg",children:"Loading webinar..."})]})}),children:o.jsx(d,{})})}},1647:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var o=r(97247),s=r(28964),n=r(19133),i=r(10863);async function a(){throw Error("Zoom SDK can only be loaded on the client side")}function l({webinarId:e,webinarTitle:t,userName:r,userEmail:l,onClose:c,onError:d}){let[u,m]=(0,s.useState)({isConnecting:!0,isConnected:!1,connectionQuality:"unknown",hasError:!1,errorMessage:""}),p=(0,s.useRef)(null),g=(0,s.useRef)(null),h=(0,s.useRef)(!1),x=(0,s.useCallback)(e=>{if(console.log("[DEBUG] Parsing webinar ID:",e),/^\d+$/.test(e))return console.log("[DEBUG] Direct meeting number detected:",e),{meetingNumber:e,password:""};try{let t=new URL(e);console.log("[DEBUG] Parsing URL:",t.href);let r=t.pathname.split("/").filter(Boolean);console.log("[DEBUG] URL path parts:",r);let o="",s=r.findIndex(e=>"w"===e||"j"===e);if(-1!==s&&r[s+1]&&(o=r[s+1].replace(/\D/g,"")),!o){let e=r[r.length-1];e&&(o=e.replace(/\D/g,""))}if(!o){let t=e.match(/\d+/g);t&&t.length>0&&(o=t.reduce((e,t)=>e.length>t.length?e:t))}let n=t.searchParams.get("pwd")||t.searchParams.get("password")||"";if(n)try{let e=decodeURIComponent(n);console.log("[DEBUG] Password decoding:",{original:n,decoded:e,needsDecoding:n!==e}),n=e}catch(e){console.log("[DEBUG] Password decode failed, using original:",n)}return console.log("[DEBUG] Extracted meeting number:",o,"password:",n?"[REDACTED]":"none"),{meetingNumber:o||e,password:n}}catch(t){return console.log("[DEBUG] URL parsing failed, treating as direct meeting number:",e),{meetingNumber:e,password:""}}},[]),b=(0,s.useCallback)(async(e,t=0)=>{try{console.log("[DEBUG] Fetching signature for meeting:",e);let t=await i.Z.post("https://api.theschoolofoptions.com/api/v1/zoom/webinar-signature",{meetingNumber:e});if(console.log("[DEBUG] Signature fetch response status:",t.status),200!==t.status){let e=await t.data;throw console.error("[DEBUG] Signature fetch failed. Body:",e),Error(`Authentication failed: ${t.status}`)}let r=await t.data;if(console.log("[DEBUG] Signature response JSON:",r),!r.signature||!r.sdkKey)throw Error("Invalid authentication response");return r}catch(e){throw console.error("Signature generation failed:",e),Error("Unable to authenticate for webinar access. Please try again.")}},[]),f=(0,s.useCallback)(async()=>{if(!h.current){h.current=!0;try{m(e=>({...e,isConnecting:!0,hasError:!1}));let{meetingNumber:t,password:o}=x(e);if(console.log("Joining webinar:",{meetingNumber:t,password:o?"[REDACTED]":"none"}),!t)throw Error("Meeting number is required to join the webinar");if(!l)throw Error("Email address is required to join webinars");if(!r)throw Error("User name is required to join the webinar");console.log("[DEBUG] Loading Zoom Embedded SDK...");let s=await a();console.log("[DEBUG] Zoom Embedded loaded:",!!s);let n=await b(t);console.log("[DEBUG] Creating Zoom client...");let i=s.createClient();p.current=i,console.log("[DEBUG] Zoom client created"),console.log("[DEBUG] Initializing Zoom client...");let c=g.current;if(!c)throw Error("Zoom container not ready");let d=c.getBoundingClientRect(),u=Math.floor(d.width),h=Math.floor(d.height);await i.init({language:"en-US",zoomAppRoot:c,patchJsMedia:!0,customize:{video:{isResizable:!0,viewSizes:{default:{width:u,height:h}}},meetingInfo:["topic","host","mn","participant"],toolbar:{buttons:[]}}}),console.log("[DEBUG] Zoom client initialized");let f={signature:n.signature,sdkKey:n.sdkKey,meetingNumber:t,userName:r,userEmail:l,password:o};console.log("[DEBUG] Joining webinar..."),await i.join(f),console.log("[DEBUG] Successfully joined webinar"),m(e=>({...e,isConnecting:!1,isConnected:!0,connectionQuality:"excellent"}))}catch(t){console.error("Webinar initialization failed:",t);let e="Failed to join webinar. Please try again.";t.message&&(e=t.message),m(t=>({...t,isConnecting:!1,hasError:!0,errorMessage:e})),d(e)}}},[e,r,l,x,b,d]),w=(0,s.useCallback)(async()=>{try{p.current&&("function"==typeof p.current.leave&&await p.current.leave(),"function"==typeof p.current.destroy&&await p.current.destroy())}catch(e){console.warn("Error leaving webinar:",e)}finally{p.current=null,h.current=!1,c()}},[c]);return(0,o.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50 flex items-center justify-center",children:[u.isConnecting&&(0,o.jsxs)("div",{className:"text-center text-white",children:[o.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-blue-500 mx-auto mb-6"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Connecting to webinar..."}),o.jsx("p",{className:"text-gray-300",children:"Please wait while we set up your session"}),o.jsx("button",{onClick:w,className:"mt-6 px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg font-semibold transition-colors",children:"Cancel"})]}),u.hasError&&(0,o.jsxs)("div",{className:"text-center text-white max-w-md mx-auto p-6",children:[o.jsx(n.Z,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),o.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Connection Failed"}),o.jsx("p",{className:"text-gray-300 mb-6",children:u.errorMessage}),(0,o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[o.jsx("button",{onClick:()=>{m(e=>({...e,hasError:!1})),h.current=!1,f()},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-semibold transition-colors",children:"Try Again"}),o.jsx("button",{onClick:w,className:"px-6 py-3 bg-gray-600 hover:bg-gray-700 rounded-lg font-semibold transition-colors",children:"Close"})]})]}),o.jsx("div",{ref:g,className:"zoom-modal-container",style:{width:"80vw",height:"80vh",position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",background:"#000",borderRadius:"8px",overflow:"hidden",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5)",zIndex:1e3}}),u.isConnected&&o.jsx("button",{onClick:w,className:"fixed top-4 right-4 z-[1100] p-3 bg-red-600 hover:bg-red-700 rounded-full text-white transition-colors shadow-lg",title:"Leave webinar",children:"✕"})]})}},31513:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(45347).createProxy)(String.raw`C:\Users\nande\OneDrive\Desktop\projects\the-school-of-options\client\school-of-options\src\app\webinar\room\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[379,197,50],()=>r(46772));module.exports=o})();