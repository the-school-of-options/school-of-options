"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{5998:(e,s,t)=>{t.d(s,{A:()=>u});var r=t(5155),a=t(2115),n=t(8125),l=t(6956),o=t(7540),i=t(5233),c=t(5380),d=t(6310);function u(e){let{isOpen:s,onClose:t,defaultMode:u="login"}=e,[m,x]=(0,a.useState)(u),[p,g]=(0,a.useState)("signup"),[f,h]=(0,a.useState)(!1),[b,w]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1),[N,j]=(0,a.useState)(null),[P,k]=(0,a.useState)(null),[C,S]=(0,a.useState)(!1),[T,A]=(0,a.useState)(0),[O,E]=(0,a.useState)({fullName:"",email:"",password:"",confirmPassword:"",resetToken:"",otp:""}),{login:F,signup:R,forgotPassword:_,resetPassword:q,generateOTP:Y,verifyOTP:L}=(0,c.A)();(0,a.useEffect)(()=>{let e;return T>0&&(e=setTimeout(()=>A(T-1),1e3)),()=>clearTimeout(e)},[T]);let D=()=>{E({fullName:"",email:"",password:"",confirmPassword:"",resetToken:"",otp:""}),j(null),k(null),h(!1),w(!1),S(!1),A(0),g("signup")},H=()=>{D(),x(u),t()},I=e=>{D(),x(e)},V=e=>{let{name:s,value:t}=e.target;E(e=>({...e,[s]:t})),j(null)},z=async()=>{if(!O.email)return void j("Please enter your email address");v(!0),j(null);try{let e=await Y(O.email,"signup"===p?"signup":"forgot_password");e.success?(S(!0),A(60),k("otp"===m?"OTP resent to your email. Please check your inbox.":"OTP sent to your email. Please check your inbox."),"otp"!==m&&x("otp")):j(e.error||"Failed to send OTP")}catch(e){j("Failed to send OTP. Please try again.")}finally{v(!1)}},B=async()=>{if(!O.otp)return void j("Please enter the OTP");v(!0),j(null);try{let e="signup"===p?"signup":"forgot_password",s=await L(O.email,O.otp,e);s.success?(k("OTP verified successfully!"),"signup"===e?await J():"forgot_password"===e&&(x("reset"),k("OTP verified. Please set your new password."))):j(s.error||"OTP verification failed")}catch(e){j("OTP verification failed. Please try again.")}finally{v(!1)}},W=async()=>{let e=await F(O.email,O.password);e.success?H():j(e.error||"Login failed")},G=async()=>{let e=await R(O.email,O.password,O.fullName);e.success?(g("signup"),S(!0),A(60),k("Account created! OTP sent to your email. Please check your inbox."),x("otp")):j(e.error||"Signup failed")},J=async()=>{k("Account verified successfully! You are now logged in."),setTimeout(()=>{H()},1500)},K=async e=>{e.preventDefault(),v(!0),j(null),k(null);try{switch(m){case"login":if(!O.email||!O.password)return void j("Please fill in all fields");await W();break;case"signup":if(!O.email||!O.password||!O.fullName)return void j("Please fill in all fields");if(O.password!==O.confirmPassword)return void j("Passwords do not match");if(O.password.length<6)return void j("Password must be at least 6 characters long");await G();break;case"forgot":if(!O.email)return void j("Please enter your email address");g("forgot"),await z();break;case"reset":if(!O.password)return void j("Please enter your new password");if(O.password!==O.confirmPassword)return void j("Passwords do not match");if(O.password.length<6)return void j("Password must be at least 6 characters long");let e=await q(O.otp,O.password);e.success?(k("Password reset successfully! You can now login."),setTimeout(()=>I("login"),2e3)):j(e.error||"Failed to reset password");break;case"otp":await B()}}catch(e){j("An unexpected error occurred. Please try again.")}finally{v(!1)}};return(0,r.jsxs)(d.A,{isOpen:s,onClose:H,title:(()=>{switch(m){case"login":return"Sign In to Your Account";case"signup":return"Create Your Account";case"forgot":return"Reset Your Password";case"reset":return"Set New Password";case"otp":return"Verify OTP"}})(),maxWidth:"md",children:[(0,r.jsxs)("form",{onSubmit:K,className:"px-6 pb-6",children:[N&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center",children:[(0,r.jsx)(n.A,{className:"h-4 w-4 text-red-500 mr-2"}),(0,r.jsx)("span",{className:"text-red-700 text-sm",children:N})]}),P&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center",children:[(0,r.jsx)(l.A,{className:"h-4 w-4 text-green-500 mr-2"}),(0,r.jsx)("span",{className:"text-green-700 text-sm",children:P})]}),(0,r.jsxs)("div",{className:"space-y-4",children:["signup"===m&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),(0,r.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:O.fullName,onChange:V,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200 text-gray-900 bg-white placeholder-gray-500",placeholder:"Enter your full name",required:!0})]}),("login"===m||"signup"===m||"forgot"===m)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",value:O.email,onChange:V,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200 text-gray-900 bg-white placeholder-gray-500",placeholder:"Enter your email address",required:!0})]}),"otp"===m&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter OTP *"}),(0,r.jsx)("input",{type:"text",id:"otp",name:"otp",value:O.otp,onChange:V,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200 text-gray-900 bg-white placeholder-gray-500 text-center tracking-widest",placeholder:"000000",maxLength:6,required:!0}),(0,r.jsx)("div",{className:"mt-2 text-center",children:T>0?(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Resend OTP in ",T," seconds"]}):(0,r.jsx)("button",{type:"button",onClick:z,disabled:y,className:"text-sm text-accent hover:text-accent/80 font-semibold underline disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Sending...":"Resend OTP"})})]}),("login"===m||"signup"===m||"reset"===m)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:f?"text":"password",id:"password",name:"password",value:O.password,onChange:V,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200 text-gray-900 bg-white placeholder-gray-500",placeholder:"reset"===m?"Enter new password":"Enter your password",required:!0}),(0,r.jsx)("button",{type:"button",onClick:()=>h(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-100 rounded transition-colors","aria-label":f?"Hide password":"Show password",children:f?(0,r.jsx)(o.A,{className:"h-4 w-4 text-gray-500"}):(0,r.jsx)(i.A,{className:"h-4 w-4 text-gray-500"})})]})]}),("signup"===m||"reset"===m)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:b?"text":"password",id:"confirmPassword",name:"confirmPassword",value:O.confirmPassword,onChange:V,className:"w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent focus:border-transparent transition-all duration-200 text-gray-900 bg-white placeholder-gray-500",placeholder:"Confirm your password",required:!0}),(0,r.jsx)("button",{type:"button",onClick:()=>w(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 hover:bg-gray-100 rounded transition-colors","aria-label":b?"Hide password":"Show password",children:b?(0,r.jsx)(o.A,{className:"h-4 w-4 text-gray-500"}):(0,r.jsx)(i.A,{className:"h-4 w-4 text-gray-500"})})]})]})]}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{type:"submit",disabled:y,className:"w-full bg-accent text-navy font-semibold py-3 px-6 rounded-lg transition-all duration-200 ".concat(y?"opacity-50 cursor-not-allowed":"hover:bg-accent/90 hover:shadow-lg transform hover:scale-[1.02]"),children:(()=>{if(y)return"Processing...";switch(m){case"login":return"Sign In";case"signup":return"Send OTP & Create Account";case"forgot":return"Send OTP";case"reset":return"Reset Password";case"otp":return"Verify OTP"}})()})})]}),(0,r.jsx)("div",{className:"px-6 pb-6",children:(0,r.jsxs)("div",{className:"text-center space-y-2",children:["login"===m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Don't have an account?"," ",(0,r.jsx)("button",{onClick:()=>I("signup"),className:"text-accent hover:text-accent/80 font-semibold underline",children:"Sign up here"})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Forgot your password?"," ",(0,r.jsx)("button",{onClick:()=>I("forgot"),className:"text-accent hover:text-accent/80 font-semibold underline",children:"Reset it here"})]})]}),"signup"===m&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Already have an account?"," ",(0,r.jsx)("button",{onClick:()=>I("login"),className:"text-accent hover:text-accent/80 font-semibold underline",children:"Sign in here"})]}),"forgot"===m&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Remember your password?"," ",(0,r.jsx)("button",{onClick:()=>I("login"),className:"text-accent hover:text-accent/80 font-semibold underline",children:"Sign in here"})]}),("reset"===m||"otp"===m)&&(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Back to"," ",(0,r.jsx)("button",{onClick:()=>I("login"),className:"text-accent hover:text-accent/80 font-semibold underline",children:"sign in"})]})]})})]})}},6310:(e,s,t)=>{t.d(s,{A:()=>l});var r=t(5155),a=t(2115),n=t(3569);function l(e){let{isOpen:s,onClose:t,title:l,children:o,maxWidth:i="md"}=e,c=(0,a.useRef)(null);return((0,a.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s&&t()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,t]),(0,a.useEffect)(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[s]),(0,a.useEffect)(()=>{if(s&&c.current){let e=c.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0];null==e||e.focus()}},[s]),s)?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&t()},role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:[(0,r.jsx)("div",{className:"absolute inset-0 backdrop-blur-fallback animate-backdrop-in",onClick:t}),(0,r.jsxs)("div",{ref:c,className:"relative bg-white rounded-2xl shadow-2xl ".concat((()=>{switch(i){case"sm":return"max-w-sm";case"md":default:return"max-w-md";case"lg":return"max-w-lg";case"xl":return"max-w-xl"}})()," w-full mx-auto animate-modal-in"),onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 pb-4",children:[(0,r.jsx)("h2",{id:"modal-title",className:"text-2xl font-bold text-navy",children:l}),(0,r.jsx)("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close modal",children:(0,r.jsx)(n.A,{className:"h-5 w-5 text-gray-500"})})]}),o]})]}):null}}}]);