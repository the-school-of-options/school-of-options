(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[128],{2245:(e,r,t)=>{"use strict";t.d(r,{default:()=>n});var s=t(5155),a=t(9059),o=t(5704);function n(e){let{className:r="",children:t="Enroll Now",variant:n="primary",size:c="md"}=e,i=new URL(o.env.NEXT_PUBLIC_RAZORPAY_URL||"https://rzp.io/rzp/theschoolofoptions");return i.searchParams.set("utm_source","site"),i.searchParams.set("utm_medium","cta"),i.searchParams.set("utm_campaign","enroll"),(0,s.jsxs)("a",{href:i.toString(),target:"_blank",rel:"noopener noreferrer",className:"".concat("font-semibold transition-colors inline-flex items-center gap-2 group"," ").concat({sm:"px-4 py-2 text-sm rounded-md",md:"px-6 py-3 text-base rounded-lg",lg:"px-8 py-4 text-lg rounded-lg"}[c]," ").concat({primary:"bg-accent text-navy hover:bg-accent/90",secondary:"bg-navy text-white hover:bg-navy/90",outline:"border-2 border-accent text-accent hover:bg-accent hover:text-navy"}[n]," ").concat(r),onClick:()=>{window.gtag?window.gtag("event","cta_enroll_click",{event_category:"engagement",event_label:"enroll_now_button",value:1}):console.log("Analytics: cta_enroll_click event fired")},children:[t,(0,s.jsx)(a.A,{className:"h-4 w-4 group-hover:translate-x-1 transition-transform"})]})}},3098:(e,r,t)=>{"use strict";t.d(r,{default:()=>n});var s=t(5155),a=t(2115),o=t(3522);function n(e){let{variant:r="unified",placeholder:t="Type your email...",buttonText:n="Subscribe",showTerms:c=!0,className:i=""}=e,[l,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(!1),[g,m]=(0,a.useState)(""),[p,y]=(0,a.useState)(!1),[f,v]=(0,a.useState)(0),x=async e=>{if(e.preventDefault(),!l){m("Please enter your email address"),y(!1);return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)){m("Please enter a valid email address"),y(!1);return}h(!0),m(""),v(0);try{let e=await o.UQ.subscribe({email:l});m(e.message||"Successfully subscribed! Thank you for joining our newsletter."),y(!0),u(""),v(0)}catch(e){console.error("Subscription error:",e),m(e instanceof Error?e.message:"Unexpected error. Please try again."),y(!1),v(e=>e+1)}finally{h(!1)}};return"unified"===r?(0,s.jsxs)("div",{className:"w-full max-w-sm mx-auto px-2 xs:px-4 sm:px-0 ".concat(i),children:[(0,s.jsx)("form",{onSubmit:x,className:"relative",children:(0,s.jsxs)("div",{className:"flex items-center bg-white rounded-lg border-2 border-gray-200 focus-within:border-accent transition-colors shadow-sm",children:[(0,s.jsx)("input",{type:"email",value:l,onChange:e=>u(e.target.value),placeholder:t,className:"newsletter-input flex-1 px-3 py-2.5 text-gray-700 placeholder-gray-400 bg-transparent rounded-l-lg focus:outline-none text-sm min-h-[40px]",disabled:d}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"newsletter-button bg-accent text-navy px-4 py-2.5 rounded-r-lg font-medium transition-colors text-sm whitespace-nowrap min-h-[40px] ".concat(d?"opacity-50 cursor-not-allowed":"hover:bg-accent-light active:bg-accent-dark"),children:d?f>0?"Retrying...":"Subscribing...":n})]})}),g&&(0,s.jsx)("div",{className:"mt-3 p-3 rounded-lg text-sm ".concat(p?"bg-accent/10 text-navy border border-accent/20":"bg-gray-100 text-navy border border-gray-200"),children:g}),c&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-3 text-center leading-relaxed",children:["By subscribing, I agree to"," ",(0,s.jsx)("a",{href:"#",className:"text-navy underline hover:text-navy-light",children:"Terms of Use"})," and acknowledge its"," ",(0,s.jsx)("a",{href:"#",className:"text-navy underline hover:text-navy-light",children:"Information Collection Notice"})," and"," ",(0,s.jsx)("a",{href:"#",className:"text-navy underline hover:text-navy-light",children:"Privacy Policy"})]})]}):(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsxs)("form",{onSubmit:x,className:"flex flex-col sm:flex-row gap-2",children:[(0,s.jsx)("input",{type:"email",value:l,onChange:e=>u(e.target.value),placeholder:"Enter your email",className:"flex-1 px-4 py-3 rounded-lg text-navy placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent text-sm sm:text-base border-2 border-white/30 focus:border-accent bg-white/95 shadow-lg",disabled:d}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"bg-accent text-navy px-6 py-3 rounded-lg font-semibold transition-colors text-sm sm:text-base whitespace-nowrap ".concat(d?"opacity-50 cursor-not-allowed":"hover:bg-accent/90"),children:d?f>0?"Retrying... (".concat(f+1,"/3)"):"Subscribing...":"Subscribe"})]}),g&&(0,s.jsx)("div",{className:"mt-3 p-3 rounded-lg text-sm ".concat(p?"bg-accent/10 text-navy border border-accent/20":"bg-gray-100 text-navy border border-gray-200"),children:g}),(0,s.jsxs)("p",{className:"text-xs sm:text-sm text-gray-300 mt-3 text-center",children:["By subscribing, I agree to"," ",(0,s.jsx)("a",{href:"#",className:"underline hover:text-white",children:"Terms of Use"})," and"," ",(0,s.jsx)("a",{href:"#",className:"underline hover:text-white",children:"Privacy Policy"})]})]})}},3115:(e,r,t)=>{Promise.resolve().then(t.t.bind(t,2619,23)),Promise.resolve().then(t.bind(t,2245)),Promise.resolve().then(t.bind(t,3098))},3522:(e,r,t)=>{"use strict";t.d(r,{R2:()=>c,UQ:()=>d,u5:()=>i});var s=t(5125),a=t(2378);let o=s.A.create({baseURL:"https://api.theschoolofoptions.com/api/v1",timeout:15e3,headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!1});o.interceptors.request.use(e=>{var r,t,s;let o=a.A.get("accessToken");return!o||(null==(r=e.url)?void 0:r.includes("/auth/"))||(null==(t=e.url)?void 0:t.includes("/otp/"))||(e.headers.Authorization="Bearer ".concat(o)),console.log("Making ".concat(null==(s=e.method)?void 0:s.toUpperCase()," request to: ").concat(e.url)),e},e=>Promise.reject(e)),o.interceptors.response.use(e=>e,async e=>{var r,t,s,n,c,i,l;let u=e.config;if((null==(r=e.response)?void 0:r.status)===401&&!u._retry){u._retry=!0;try{let e=a.A.get("refreshToken");if(e){let r=await o.post("/auth/refresh-token",{refreshToken:e}),d=(null==(t=r.data)?void 0:t.accessToken)||(null==(n=r.data)||null==(s=n.tokens)?void 0:s.AccessToken),h=(null==(c=r.data)?void 0:c.refreshToken)||(null==(l=r.data)||null==(i=l.tokens)?void 0:i.RefreshToken);if(d)return a.A.set("accessToken",d),h&&a.A.set("refreshToken",h),u.headers.Authorization="Bearer ".concat(d),o(u)}}catch(e){a.A.remove("accessToken"),a.A.remove("refreshToken"),console.error("Token refresh failed:",e)}}return"ECONNABORTED"===e.code?console.error("Request timeout"):e.response?console.error("Server error:",e.response.status,e.response.data):e.request?console.error("Network error:",e.request):console.error("Error:",e.message),Promise.reject(e)});let n=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;for(let a=0;a<=r;a++)try{return await e()}catch(e){if(a===r)throw e;if(s.A.isAxiosError(e)&&("ECONNABORTED"===e.code||"ENOTFOUND"===e.code||"ECONNREFUSED"===e.code||!e.response)){await new Promise(e=>setTimeout(e,t*(a+1)));continue}throw e}throw Error("Max retries exceeded")},c={login:async e=>{try{console.log("\uD83C\uDF10 API: Sending login request for:",e.email);let r=await n(()=>o.post("/auth/login",e));return console.log("\uD83C\uDF10 API: Login response received:",r.data),{success:!0,message:"Login successful",data:r.data}}catch(e){return console.error("\uD83C\uDF10 API: Login request failed:",e),l(e,"Login failed")}},signup:async e=>{try{let r=await n(()=>o.post("/auth/signup",e));return{success:!0,message:"Account created successfully",data:r.data}}catch(e){return l(e,"Signup failed")}},forgotPassword:async e=>{try{let r=await n(()=>o.post("/auth/forgot-password",e));return{success:!0,message:"Password reset instructions sent to your email",data:r.data}}catch(e){return l(e,"Failed to send reset email")}},resetPassword:async e=>{try{let r=await n(()=>o.post("/auth/reset-password",e));return{success:!0,message:"Password reset successfully",data:r.data}}catch(e){return l(e,"Failed to reset password")}},refreshToken:async e=>{try{let r=await n(()=>o.post("/auth/refresh-token",e));return{success:!0,message:"Token refreshed successfully",data:r.data}}catch(e){return l(e,"Failed to refresh token")}}},i={generate:async e=>{try{return await n(()=>o.post("/otp/generate",e)),{success:!0,message:"OTP sent successfully"}}catch(e){return u(e,"Failed to send OTP")}},verify:async e=>{try{return await n(()=>o.post("/otp/verify",e)),{success:!0,message:"OTP verified successfully"}}catch(e){return u(e,"OTP verification failed")}}},l=(e,r)=>{if(s.A.isAxiosError(e)){if("ECONNABORTED"===e.code)return{success:!1,error:"Connection timeout. Please try again later."};else if(e.response){var t,a;let s=e.response.status,o=(null==(t=e.response.data)?void 0:t.message)||(null==(a=e.response.data)?void 0:a.error);if(401===s)return{success:!1,error:"Invalid credentials. Please check your email and password."};if(409===s)return{success:!1,error:"Email already exists. Please use a different email or try logging in."};if(400===s)return{success:!1,error:o||"Invalid request. Please check your information."};else if(s>=500)return{success:!1,error:"Server error. Please try again in a few minutes."};else return{success:!1,error:o||r}}else if(e.request)return{success:!1,error:"Unable to connect to server. Please check your internet connection."}}return{success:!1,error:r}},u=(e,r)=>{if(s.A.isAxiosError(e)){if("ECONNABORTED"===e.code)return{success:!1,error:"Connection timeout. Please try again later."};else if(e.response){var t,a;let s=e.response.status,o=(null==(t=e.response.data)?void 0:t.message)||(null==(a=e.response.data)?void 0:a.error);return 400===s?{success:!1,error:o||"Invalid OTP. Please check and try again."}:429===s?{success:!1,error:"Too many attempts. Please wait before trying again."}:s>=500?{success:!1,error:"Server error. Please try again in a few minutes."}:{success:!1,error:o||r}}else if(e.request)return{success:!1,error:"Unable to connect to server. Please check your internet connection."}}return{success:!1,error:r}},d={subscribe:async e=>{try{return await n(()=>o.post("/subscriber",e)),{success:!0,message:"Successfully subscribed! Welcome to our newsletter."}}catch(e){if(s.A.isAxiosError(e))if("ECONNABORTED"===e.code)throw Error("Connection timeout. The server is taking too long to respond. Please try again later.");else if(e.response){var r,t;let s=e.response.status,a=(null==(r=e.response.data)?void 0:r.message)||(null==(t=e.response.data)?void 0:t.error);if(409===s)throw Error("This email is already subscribed to our newsletter.");if(400===s)throw Error(a||"Invalid email address. Please check and try again.");if(s>=500)throw Error("Server error. Please try again in a few minutes.");else throw Error(a||"Subscription failed. Please try again.")}else if(e.request)throw Error("Unable to connect to server. Please check your internet connection.");else throw Error("Request setup failed. Please try again.");throw Error("Unexpected error occurred. Please try again.")}}}}},e=>{e.O(0,[96,358],()=>e(e.s=3115)),_N_E=e.O()}]);